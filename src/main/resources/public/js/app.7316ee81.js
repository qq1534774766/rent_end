(function(e){function t(t){for(var r,n,s=t[0],l=t[1],c=t[2],u=0,d=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&d.push(i[n][0]),i[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);m&&m(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,n=1;n<a.length;n++){var s=a[n];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={app:0},i={app:0},o=[];function s(e){return l.p+"js/"+({index:"index"}[e]||e)+"."+{"chunk-441f8ca5":"41aed4e2",index:"b902dc76"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-441f8ca5":1,index:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=new Promise((function(t,a){for(var r="css/"+({index:"index"}[e]||e)+"."+{"chunk-441f8ca5":"bd74e51c",index:"ccb06fb7"}[e]+".css",i=l.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===r||u===i))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],u=c.getAttribute("data-href");if(u===r||u===i)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete n[e],m.parentNode.removeChild(m),a(o)},m.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){n[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,a){r=i[e]=[t,a]}));t.push(r[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(m);var a=i[e];if(0!==a){if(a){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",d.name="ChunkLoadError",d.type=r,d.request=n,a[1](d)}i[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01e2":function(e,t,a){},"034f":function(e,t,a){"use strict";a("85ec")},"0a12":function(e,t,a){"use strict";a("f4db")},1326:function(e,t,a){"use strict";a("fd4d")},"17d8":function(e,t,a){},2965:function(e,t,a){},"2fc1":function(e,t,a){"use strict";a("4fe2")},3435:function(e,t,a){},"3aa4":function(e,t,a){},"3bec":function(e,t,a){},"3ddb":function(e,t,a){e.exports=a.p+"img/tx.9f5cbce9.jpg"},"420d":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return c}));var r=a("8daa"),n="/manage/room";function i(e,t,a,i,o){return Object(r["a"])({url:n,method:"get",params:{page:e,pageSize:t,buildingName:a,houseNumber:i,rentState:o}})}function o(e,t){return Object(r["a"])({url:n,method:"post",data:{buildingId:e,houseNumber:t}})}function s(e){return Object(r["a"])({url:n,method:"delete",params:{roomId:e}})}function l(e){return Object(r["a"])({url:"manage/listRoomByBuildingId",method:"get",params:{buildingId:e}})}function c(){return Object(r["a"])({url:"manage/roomCountInBuilding",method:"get"})}},4360:function(e,t,a){"use strict";var r=a("2b0e"),n=a("2f62");r["default"].use(n["a"]);var i={},o={},s={isMobile:[],publicLocation:""};t["a"]=new n["a"].Store({actions:i,mutations:o,state:s})},4379:function(e,t,a){"use strict";a("2965")},"491a":function(e,t,a){"use strict";a("01e2")},"4fe2":function(e,t,a){},"548f":function(e,t,a){},5683:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("466d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],o={name:"App"},s=o,l=(a("034f"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,null,null),u=c.exports,d=a("2b27"),m=a.n(d),f=a("bc3a"),h=a.n(f),p=a("8c4f"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",{attrs:{height:"90px"}},[a("CHeader")],1),a("el-main",[a("CMain")],1)],1)],1)},g=[],v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CHeader"},[e._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],staticClass:"hello"},[a("h1",[e._v("Welcome to you!")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],staticClass:"cat"},[a("svg",{attrs:{viewBox:"0 0 400 400",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[a("title",[e._v("小猫咪")]),a("g",{attrs:{id:"页面-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[a("g",{attrs:{id:"小猫咪"}},[a("rect",{attrs:{id:"矩形",x:"0",y:"0",width:"400",height:"400"}}),a("g",{attrs:{id:"猫咪备份",transform:"translate(40.000000, 122.000000)"}},[a("path",{attrs:{d:"M37.3183576,37.399307 C37.3183576,37.399307 7.39987774,10.0363192 4.91996819,21.9246076 C2.44005864,33.8128959 12.2732657,56.6546812 16.5831889,63.1915795 C16.5831889,63.1915795 3.0367661,89.1598518 27.3604902,108.901716 C27.3604902,108.901716 -9.50240123,146.055938 3.95592828,162.468749 C17.4142578,178.881561 35.1675513,139.754813 41.4022301,127.53445 C41.4022301,127.53445 50.4725159,141.664245 64.8051299,139.178663 C64.8051299,139.178663 14.400802,156.328681 22.6799102,174.114623 C33.1214597,196.549616 51.210505,170.87191 66.954274,162.458787 C80.9395012,154.987098 125.852126,147.633295 138.399604,149.595858 C138.399604,149.595858 194.14438,153.809891 196.715707,152.174422 C196.715707,152.174422 203.675078,157.188755 205.787655,157.333208 C207.900233,157.477661 145.049817,157.084152 142.038023,171.778475 C137.217824,195.32758 158.659401,191.900565 174.685733,184.408951 C188.300304,178.044732 197.237619,179.416202 203.19472,183.118839 C210.009485,187.349476 300.245283,184.599894 285.340893,106.099002 C275.306568,53.2392889 192.916061,33.8278393 157.838305,42.551452 C135.598902,48.0821627 117.396831,51.8744603 113.776695,51.5789134 C110.156559,51.2833666 95.4815445,31.4219553 91.746721,30.9454275 C88.0118974,30.4688997 89.3632154,3.9344394 83.9712405,1.28448016 C78.5792655,-1.36547909 66.4789026,15.1303512 63.2360718,24.4965292 C63.2477068,24.5031707 40.3201784,28.2672419 37.3183576,37.399307 Z",id:"形状_1718",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M28,108.596616 C28,108.596616 47.69731,123.401003 65,104",id:"形状_1740",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M128,149 C128,149 141.916687,140.463642 135.13919,123",id:"形状_1742",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M201,104 C201,104 171.75,132.75041 201,150",id:"形状_1743",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M114.558576,55 C114.558576,55 124.776129,73.1530025 110,85",id:"形状_1741",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M55.8844148,24.8149923 C55.8844148,24.8149923 52.0257565,35.4863731 54.5965421,40.2603247 C57.1673277,45.0342762 62.1336556,56.9186152 66.1973154,60.8524441 C70.2609751,64.786273 53.6823013,99.1882197 27.5280712,96.8898959 C-11.7164999,93.4382676 23.7487684,52.0916382 30.2625274,46.2886606 L0,16.0724139 L41.9013251,32.3412985 C41.9013251,32.3412985 61.8509518,24.4206152 61.0408651,26.1025176 C60.2307783,27.78442 68.6254708,52.6615493 97,38 C100,35 91,31 91,31 C91,31 70,24 84,4 C83,-8 56.6829289,16.6258675 55.8844148,24.8149923 Z",id:"形状_1725",stroke:"#1B1B1B",fill:"#E99952"}}),a("path",{attrs:{d:"M165.489599,44.0773412 C165.489599,44.0773412 152.961727,91.462732 200.568637,109.099395 C248.175547,126.736058 267.813899,92.1976956 288,108 C308.186101,123.802304 290.027575,206.893226 296.450124,106.781613 C302.872672,6.67000052 175.836761,24.8298199 165.489599,44.0773412 Z",id:"形状_1739",stroke:"#1B1B1B",fill:"#E99952"}}),a("path",{attrs:{d:"M26,152.693955 C26,152.693955 15.9446101,157.73828 14,148",id:"形状_1738",stroke:"#1B1B1B"}}),a("path",{attrs:{d:"M18,162 C13.2673341,161.492149 9.52363379,157.748448 9,153",id:"形状_1739-2",stroke:"#1B1B1B"}}),a("path",{attrs:{d:"M26,174 C26,174 30.3993253,167.668726 35,167",id:"形状_1740-2",stroke:"#1B1B1B",fill:"#E99952"}}),a("path",{attrs:{d:"M32,181 C32,181 39.8647727,168.209803 44,169.038608",id:"形状_1741-2",stroke:"#1B1B1B",fill:"#E99952"}}),a("path",{attrs:{d:"M152,174 C152,174 142.58808,182.336518 149.590548,186",id:"形状_1742-2",stroke:"#1B1B1B"}}),a("path",{attrs:{d:"M161,174 C161,174 153.788825,185.810837 158.731098,188",id:"形状_1743-2",stroke:"#1B1B1B"}}),a("path",{attrs:{d:"M61,60 C61,60 60.1299716,70.7767775 47,67.3143032",id:"形状_1728",stroke:"#1B1B1B"}}),a("path",{attrs:{d:"M86,50.7794803 C86,50.7794803 95.7943182,55.6272389 98,46",id:"形状_1729",stroke:"#1B1B1B"}}),a("path",{attrs:{d:"M76.939498,61 C76.939498,61 77.9185261,74.9013775 72,72.7796859",id:"形状_1723",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M79,58 C79,58 85.1349792,68.4595797 89,61.758609",id:"形状_1724",stroke:"#1B1B1B",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M73.1548953,59.192916 C72.3124208,57.7568595 74.9504189,54.9786773 80,56.3876384 L78.6309791,62 C78.6309791,62 74.3080321,61.1473979 73.1548953,59.192916 Z",id:"形状_1722",stroke:"#FA6666",fill:"#FA6666"}}),a("path",{attrs:{d:"M283,104 C286.441035,159.852307 251.86701,172.691107 234.023258,171.465451 C223.240245,170.724778 205.295579,154.360702 201.348314,161.973627 C184.019064,195.389664 267.745401,200.091037 284.017526,180.170413 C319.494928,136.733029 296,101 296,101 C296,101 282.79817,100.821212 283,104 Z",id:"形状_1719",stroke:"#1B1B1B",fill:"#E99952"}})])])])])])])},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logo"},[r("img",{attrs:{src:a("69a4"),alt:""}})])}],w={name:"CHeader",computed:{isMobile:function(){return this.$store.state.isMobile}}},x=w,_=(a("671e"),Object(l["a"])(x,v,y,!1,null,"a2b4e3dc",null)),k=_.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CMain",style:e.cssObj1},[a("el-container",[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],attrs:{width:"35%"}}),a("el-main",{style:e.mainTop},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isMobile,expression:"isMobile"}],staticClass:"hello"},[a("h1",[e._v("Welcome to you!")])]),a("el-row",[a("el-col",{attrs:{span:12}},[a("router-link",{attrs:{to:"/login","active-class":"active",checked:""}},[e._v("登录 ")])],1),a("el-col",{attrs:{span:12}},[a("router-link",{attrs:{to:"/register","active-class":"active"}},[e._v("注册 ")])],1)],1),a("router-view")],1),a("el-aside",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],attrs:{width:"35%"}})],1)],1)},C=[],S={name:"CMain",data:function(){return{mainTop:{margin:"50px 0 250px 0"},cssObj:{backgroundColor:"#FFDEE9",backgroundImage:""}}},created:function(){this.isMobile&&(this.mainTop.margin="100px 0 250px 0")},mounted:function(){this.$router.push({path:"/login"})},computed:{isMobile:function(){return this.$store.state.isMobile}}},$=S,D=(a("843f"),Object(l["a"])($,I,C,!1,null,"3d71a88c",null)),F=D.exports,N={name:"Customer",components:{CHeader:k,CMain:F},data:function(){return{}},created:function(){var e=this.$cookies.get("username");null!==e&&""!==e&&this.$router.push({path:"/manage",query:{username:e}})}},R=N,M=(a("db28"),Object(l["a"])(R,b,g,!1,null,"d9d73a52",null)),E=M.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clogin",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":"left"}},[a("el-form-item",{attrs:{prop:"username",label:"用户名","label-width":"80px"}},[a("el-input",{attrs:{name:"username",autocomplete:"username",placeholder:"请输入用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}},[a("i",{staticClass:"el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{name:"password",autocomplete:"current-password",prop:"password",label:"密码","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}},[a("i",{staticClass:"el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{staticStyle:{"text-align":"center"},attrs:{prop:"rememberMe"}},[a("el-checkbox",{model:{value:e.ruleForm.rememberMe,callback:function(t){e.$set(e.ruleForm,"rememberMe",t)},expression:"ruleForm.rememberMe"}},[e._v("3天内免登录")]),a("h4",[a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.$message.error("忘记密码无法自行找回，请联系房东修改密码!")}}},[e._v("忘记密码？")])])],1),a("el-form-item",{staticClass:"last"},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.login}},[e._v("登录 ")])],1)],1)],1)},T=[],O=(a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),{name:"CLogin",props:["username"],data:function(){return{labelPosition:"right",ruleForm:{username:this.username,password:"",rememberMe:!1},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:20,message:"用户名长度不少于4",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少为6位",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(t){var a=new URLSearchParams;a.append("username",e.ruleForm.username),a.append("password",e.ruleForm.password),a.append("rememberMe",e.ruleForm.rememberMe),e.$axios.post(e.publicLocation+"/login",a).then((function(t){"username"in t.data?(e.$message.success("登录成功"),e.$router.push({path:"/manage"})):"0"===t.data.state?e.$message.error("用户名不存在或密码错误！"):"1"===t.data.state?e.$message.error("抱歉！您的账号被锁定，请联系房东处理！"):"2"===t.data.state&&e.$message.error("抱歉！您的账号被指定为不可用，请联系房东处理！")}))}else e.$message({showClose:!0,message:"用户名与密码格式不正确",type:"error"})}))}},computed:{publicLocation:function(){return this.$store.state.publicLocation}}}),j=O,q=(a("0a12"),Object(l["a"])(j,B,T,!1,null,"61911c00",null)),z=q.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("el-form",{ref:"registerForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.registerForm,"label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{prop:"username",label:"用户名","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入用户名（账号）"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}},[a("i",{staticClass:"el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"phone",label:"手机号","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.registerForm.phone,callback:function(t){e.$set(e.registerForm,"phone",t)},expression:"registerForm.phone"}},[a("i",{staticClass:"el-icon-phone-outline",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"password",label:"密码","label-width":"80px"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}},[a("i",{staticClass:"el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"twoPassword",label:"确认密码","label-width":"80px"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:e.registerForm.twoPassword,callback:function(t){e.$set(e.registerForm,"twoPassword",t)},expression:"registerForm.twoPassword"}},[a("i",{staticClass:"el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"code",label:"验证码","label-width":"80px"}},[a("el-input",{staticStyle:{width:"65%"},attrs:{placeholder:"请输入验证码"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code","string"===typeof t?t.trim():t)},expression:"registerForm.code"}},[a("i",{staticClass:"el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})]),a("div",{staticClass:"yzm",on:{click:function(t){e.t=Math.random()}}},[a("img",{attrs:{src:e.publicLocation+"/code/getKaptcha?"+e.t,alt:""}})])],1),a("el-form-item",{staticClass:"last",staticStyle:{margin:"0"}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.register("registerForm")}}},[e._v("注册 ")])],1)],1)],1)},A=[],H=(a("00b4"),{name:"CRegister",data:function(){var e=this,t=function(e,t,a){""===t?a(new Error("请输入用户名")):4<=t.length&&t.length<=20?/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(t)?a():a(new Error("用户名只能中文、字母和数字，不能包含特殊字符")):a(new Error("用户名不得少于4个字符,不超过20"))},a=function(e,t,a){""===t?a(new Error("请输入密码")):/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z\\W]{6,18}$/.test(t)?a():a(new Error("密码必须包含数字和字母，且长度为6~18"))},r=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.registerForm.password?r(new Error("两次输入密码不一致!")):r()},n=function(e,t,a){""===t?a(new Error("请输入手机号")):/^1\d{10}$/.test(t)?a():a(new Error("请输入正确的手机号"))},i=function(t,a,r){""===a?r(new Error("请输入验证码")):e.$axios.get(e.publicLocation+"/code/verifyCode",{params:{code:e.registerForm.code}}).then((function(e){e.data.state?r():r(new Error("验证码错误！"))}))};return{registerForm:{username:"",password:"",twoPassword:"",phone:"",code:""},rules:{username:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:a,trigger:"blur"}],twoPassword:[{required:!0,validator:r,trigger:"blur"}],phone:[{required:!0,validator:n,trigger:"blur"}],code:[{required:!0,validator:i,trigger:"blur"}]},t:1}},methods:{register:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=new URLSearchParams;a.append("username",t.registerForm.username),a.append("password",t.registerForm.twoPassword),a.append("phoneNumber",t.registerForm.phone),t.$axios.post(t.publicLocation+"/uUser/register",a).then((function(e){"1"===e.data.exist?t.$message.error("用户名已存在！"):(t.$message.success("注册成功"),t.$router.push({path:"/login",query:{username:t.registerForm.username}}))}))}else t.$message.error("信息填写有误，请检查")}))}},computed:{publicLocation:function(){return this.$store.state.publicLocation}}}),U=H,V=(a("4379"),Object(l["a"])(U,L,A,!1,null,"010637ae",null)),P=V.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("LeftAside",{attrs:{isCollapse:e.isCollapse}}),a("MMain",{attrs:{changeCollapse:e.changeCollapse}})],1)],1)},J=[],W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"LeftAsideFather",style:{width:e.aside}},[a("div",{staticClass:"LeftAside"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"",collapse:e.isCollapse,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","unique-opened":!0,mode:"vertical"}},[a("el-menu-item",{attrs:{index:"/manage/"}},[a("i",{staticClass:"el-icon-s-home"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"iconfont icon-jichuxinxiguanli"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("信息管理")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/renter"}},[a("i",{staticClass:"iconfont icon-ren-duoren"}),a("span",[e._v("租客管理")])])],1),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/buildingManage"}},[a("i",{staticClass:"iconfont icon-qiyezhuangtai"}),a("span",[e._v("楼盘管理")])])],1),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/queryHouseInfo"}},[a("i",{staticClass:"iconfont icon-fangzi"}),a("span",[e._v("房屋管理")])])],1),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/manage/meterReadingManage"}},[a("i",{staticClass:"iconfont icon-shuidian1"}),a("span",[e._v("水电管理")])])],1)],2)],1)],1)])},Q=[],K=(a("82da"),{name:"LeftAside",data:function(){return{aside:"200px",username:this.$cookies.get("username")}},props:{isCollapse:{type:Boolean}},computed:{isMobile:function(){return this.$store.state.isMobile}},watch:{isCollapse:function(e){this.aside=e?"65px":"200px"}}}),G=K,X=(a("ed89"),Object(l["a"])(G,W,Q,!1,null,"967bea06",null)),Y=X.exports,ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("div",{staticClass:"left",staticStyle:{float:"left"}},[r("h1",[r("span",{staticClass:"collapse-icon"},[r("svg",{staticClass:"hamburger is-active",attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},on:{click:e.toChangeCollapse}},[r("path",{attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}})])]),r("span",{staticClass:"title"},[e._v("出租房管理系统")])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMobile,expression:"!isMobile"}],staticClass:"right",staticStyle:{float:"right"}},[r("div",{staticClass:"user"},[r("div",{staticClass:"userLogo"},[r("img",{attrs:{src:a("3ddb"),alt:""}})])]),r("el-dropdown",[r("span",[r("span",{staticClass:"username"},[e._v(e._s(e.username))]),r("i",{staticClass:"el-icon-caret-left",staticStyle:{"margin-right":"15px"}})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",[e._v("个人中心")]),r("el-dropdown-item",[r("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logout.apply(null,arguments)}}},[e._v("退出登录")])])],1)],1)],1)]),r("el-main",[r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("keep-alive",[e.$route.meta.keepAlive?r("router-view"):e._e()],1)],1),e.$route.meta.keepAlive?e._e():r("router-view")],1)],1)},te=[],ae={name:"MMain",props:{changeCollapse:{type:Function}},data:function(){return{username:this.$cookies.get("username")}},computed:{isMobile:function(){return this.$store.state.isMobile},publicLocation:function(){return this.$store.state.publicLocation}},methods:{logout:function(){var e=this;this.$confirm("是否退出".concat(this.username,"的登录状态?"),"温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message({type:"success",message:"退出成功!"}),e.$cookies.remove("username"),e.$cookies.remove("JSESSIONID"),e.$axios.get(e.publicLocation+"/logout"),e.$router.push({path:"/login"})})).catch((function(){e.$message({type:"info",message:"已取消"})}))},toChangeCollapse:function(){this.changeCollapse()}},created:function(){}},re=ae,ne=(a("c63a"),Object(l["a"])(re,ee,te,!1,null,"41b240a1",null)),ie=ne.exports,oe={name:"MIndex",components:{LeftAside:Y,MMain:ie},data:function(){return{isCollapse:!1}},methods:{changeCollapse:function(){this.isCollapse=!this.isCollapse}},created:function(){null===this.$cookies.get("username")&&this.$router.push("/login")},beforeRouteEnter:function(e,t,a){a()}},se=oe,le=(a("2fc1"),Object(l["a"])(se,Z,J,!1,null,null,null)),ce=le.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{prop:"choose",label:"角色名",required:""}},[a("el-select",{attrs:{clearable:"",placeholder:"选择角色"},model:{value:e.form.choose,callback:function(t){e.$set(e.form,"choose",t)},expression:"form.choose"}},e._l(e.form.roles,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{prop:"username",label:"用户名(登录账号)",required:""}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{prop:"password",required:"",label:"用户密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{prop:"name",label:"姓名",required:""}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"phoneNumber",label:"电话号码",required:""}},[a("el-input",{model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1),a("el-form-item",{attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"0"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("未知")])]],2),a("el-form-item",{attrs:{prop:"identity",label:"身份证号码"}},[a("el-input",{model:{value:e.form.identity,callback:function(t){e.$set(e.form,"identity",t)},expression:"form.identity"}})],1),a("el-form-item",{attrs:{label:"锁定账号"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"已锁定","inactive-text":"未锁定"},model:{value:e.form.locked,callback:function(t){e.$set(e.form,"locked",t)},expression:"form.locked"}})],1),a("el-form-item",{attrs:{label:"账号可用"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"可用","inactive-text":"不可用"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRenter("form")}}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)},de=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("h3",[e._v("录入账户信息")])])}],me=(a("b0c0"),a("159b"),a("a4d3"),a("e01a"),a("6bbb")),fe={name:"InsertRenter",data:function(){var e=function(e,t,a){""===t?a(new Error("请输入用户名")):4<=t.length&&t.length<=20?/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(t)?a():a(new Error("用户名只能中文、字母和数字，不能包含特殊字符")):a(new Error("用户名不得少于4个字符,不超过20"))},t=function(e,t,a){""===t?a(new Error("请输入密码")):/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z\\W]{6,18}$/.test(t)?a():a(new Error("密码必须包含数字和字母，且长度为6~18"))},a=function(e,t,a){""===t?a(new Error("请输入手机号")):/^1\d{10}$/.test(t)?a():a(new Error("请输入正确的手机号"))},r=function(e,t,a){""===t||/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(t)?a():a(new Error("请输入正确的中国大陆身份证号"))};return{form:{choose:"",roles:[],username:"",password:"",sex:"2",name:"",phoneNumber:"",identity:"",locked:!1,enable:!0},rules:{choose:[{required:!0,message:"请选择角色名",trigger:"blur"}],username:[{required:!0,validator:e,trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],phoneNumber:[{required:!0,validator:a,trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],identity:[{validator:r,trigger:"blur"}]}}},methods:{addRenter:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=t.form;Object(me["a"])(a.choose,a.name,a.sex,a.identity,a.username,a.password,a.phoneNumber,a.locked?"1":"0",a.enable?"1":"0").then((function(){t.$message.success("提交成功"),t.$router.go(-1)}))}else t.$message.error("表单信息填写错误！")}))}},created:function(){var e=this;Object(me["e"])().then((function(t){t.data.forEach((function(t){var a={value:t.roleId,label:t.description};e.form.roles.push(a)}))}))}},he=fe,pe=(a("491a"),Object(l["a"])(he,ue,de,!1,null,"0bdcdc90",null)),be=pe.exports,ge=a("9136"),ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e.isHasData?a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"角色名",required:""}},[a("el-select",{attrs:{clearable:"",placeholder:"选择角色名"},model:{value:e.form.choose,callback:function(t){e.$set(e.form,"choose",t)},expression:"form.choose"}},e._l(e.form.roles,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"用户名(登录账号)",required:""}},[a("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"新密码"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"留空表示密码不变",placement:"right"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("el-form-item",{attrs:{label:"姓名",required:""}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"性别"}},[[a("el-radio",{attrs:{label:"0"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("未知")])]],2),a("el-form-item",{attrs:{label:"电话号码",required:""}},[a("el-input",{model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1),a("el-form-item",{attrs:{label:"身份证号码"}},[a("el-input",{attrs:{placeholder:"默认为空"},model:{value:e.form.identity,callback:function(t){e.$set(e.form,"identity",t)},expression:"form.identity"}})],1),a("el-form-item",{attrs:{label:"锁定账号"}},[a("el-switch",{attrs:{"active-color":"#ff4949","inactive-color":"#13ce66","active-text":"已锁定","inactive-text":"未锁定"},model:{value:e.form.locked,callback:function(t){e.$set(e.form,"locked",t)},expression:"form.locked"}})],1),a("el-form-item",{attrs:{label:"账号可用"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"可用","inactive-text":"不可用"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.updateRenter}},[e._v("确认修改")]),a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1):a("div",{staticStyle:{"text-align":"center",color:"red","font-size":"30px",padding:"50px 0"}},[a("h1",[e._v("错误！！请先在左边查询租客信息！")])])],1)},ye=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("h3",[e._v("修改账户信息")])])}],we={name:"InsertRenter",data:function(){return{isHasData:!1,form:{choose:"",roles:[{value:1,label:"客户"},{value:2,label:"房东"},{value:3,label:"超级用户"}],username:"",password:"",sex:"2",name:"",phoneNumber:"",identity:"",locked:!1,enable:!0,userId:""}}},computed:{tableData:function(){return JSON.parse(this.$route.query.tableData)}},methods:{updateRenter:function(){var e=this,t=this.form,a={userId:t.userId,roleId:t.choose,username:t.username,password:t.password,name:t.name,sex:t.sex,phoneNumber:t.phoneNumber,identity:t.identity,locked:t.locked?"1":"0",enable:t.enable?"1":"0"};Object(me["f"])(a).then((function(){e.$message.success("更新用户信息用户成功！"),e.$router.go(-1)}))}},created:function(){if(void 0!==this.$route.query.isHasData){this.isHasData=!0;var e=this.tableData;this.form.choose=e.roleId,this.form.username=e.username,this.form.password=e.password,this.form.sex=e.sex,this.form.name=e.name,this.form.phoneNumber=e.phoneNumber,this.form.identity=e.identity,this.form.locked=e.locked,this.form.enable=e.enable,this.form.userId=e.userId}}},xe=we,_e=(a("8da9"),Object(l["a"])(xe,ve,ye,!1,null,"1f2782e8",null)),ke=_e.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",[a("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,inline:!0,"label-position":"left"}},[a("el-form-item",{attrs:{label:"附属楼房名",prop:"buildingName"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入附属楼房名",clearable:""},model:{value:e.searchForm.buildingName,callback:function(t){e.$set(e.searchForm,"buildingName",t)},expression:"searchForm.buildingName"}})],1),a("el-form-item",{attrs:{label:"门牌号",prop:"houseNumber"}},[a("el-input",{staticClass:"input",attrs:{clearable:"",placeholder:"请输入门牌号"},model:{value:e.searchForm.houseNumber,callback:function(t){e.$set(e.searchForm,"houseNumber",t)},expression:"searchForm.houseNumber"}})],1),a("el-form-item",{attrs:{label:"是否租房",prop:"rentState"}},[a("el-select",{staticClass:"rentStatueSelect",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.rentState,callback:function(t){e.$set(e.searchForm,"rentState",t)},expression:"searchForm.rentState"}},[a("el-option",{attrs:{label:"是",value:"true"}}),a("el-option",{attrs:{label:"否",value:"false"}})],1)],1),a("span",{staticClass:"search-button1"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryRoom}},[e._v("搜索")])],1),a("el-form-item",[a("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),a("div",{staticStyle:{height:"15px"}}),a("div",[a("el-button",{staticClass:"addButton",attrs:{type:"success",icon:"el-icon-plus",size:"medium"},on:{click:e.goInsert}},[e._v("新增")]),a("el-pagination",{staticClass:"renterPagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticStyle:{width:"100%","font-size":"16px"},attrs:{data:e.tableData,"header-cell-style":{background:"#f0f0f0",color:"#333"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{staticClass:"subfield-title"},[a("span",[e._v("楼房信息")])]),a("el-form-item",{attrs:{label:"楼房 ID"}},[a("span",[e._v(e._s(t.row.houseInfo.buildingId))])]),a("el-form-item",{attrs:{label:"楼房名称"}},[a("span",[e._v(e._s(t.row.houseInfo.buildingName))])]),a("el-form-item",{attrs:{label:"楼房地址"}},[a("span",[e._v(e._s(t.row.houseInfo.address))])]),a("el-form-item",{staticClass:"subfield-title"},[a("span",[e._v("房屋信息")])]),a("el-form-item",{attrs:{label:"房屋 ID"}},[a("span",[e._v(e._s(t.row.houseInfo.roomId))])]),a("el-form-item",{attrs:{label:"门牌号"}},[a("span",[e._v(e._s(t.row.houseInfo.houseNumber))])]),a("el-form-item",{staticClass:"subfield-title"},[a("span",[e._v("房屋状态")])]),a("el-form-item",{attrs:{label:"租用状态"}},[a("span",[e._v(e._s(t.row.houseState.rentState?"已租":"未租"))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.row.houseState.rentState,expression:"props.row.houseState.rentState"}]},[a("el-form-item",{attrs:{label:"租用人-用户名"}},[a("span",[e._v(e._s(t.row.renterInfo.username))])]),a("el-form-item",{attrs:{label:"租用人-姓名"}},[a("span",[e._v(e._s(t.row.renterInfo.name))])]),a("el-form-item",{attrs:{label:"租用人-手机号"}},[a("span",[e._v(e._s(t.row.renterInfo.phoneNumber))])]),a("el-form-item",{attrs:{label:"租用时间"}},[a("span",[e._v(e._s(t.row.houseState.createdTime))])]),a("el-form-item",{attrs:{label:"停租时间"}},[a("span",[e._v(e._s(null==t.row.houseState.stopTime?"未指定":t.row.houseState.stopTime))])])],1)],1)]}}])}),a("el-table-column",{attrs:{label:"附属楼房名",prop:"houseInfo.buildingName",align:"center"}}),a("el-table-column",{attrs:{label:"房屋门牌号",prop:"houseInfo.houseNumber",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"租用状态",prop:"houseState.rentState",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.houseState.rentState?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",round:""},on:{click:function(a){return e.toUpdate(t.row)}}},[e._v("修改 ")]),a("el-button",{staticStyle:{width:"45%"},attrs:{type:"danger",round:""},on:{click:function(a){return e.deleteHouse(t.row.houseInfo.roomId)}}},[e._v("删除 ")])],1)]}}])})],1)],1)},Ce=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("h3",[e._v("房屋与租用关系管理")])])}],Se=(a("841c"),a("4de4"),a("5319"),a("fb6a"),a("99af"),a("a434"),a("e9c4"),a("420d")),$e=a("70ad"),De={data:function(){return{searchForm:{buildingName:"",houseNumber:"",rentState:""},buildingTipList:[],page:1,pageSize:10,pageTotalSize:20,tableData:[{renterInfo:{userId:"",name:"",username:"",phoneNumber:""},houseInfo:{buildingId:"",buildingName:"",address:"",roomId:"",houseNumber:""},houseState:{rentingId:"",rentState:"",createdTime:"",stopTime:""}}],showLoading:!0,choose:"",search:""}},computed:{filterData:function(){var e=this;return this.choose&&""===this.search?this.tableData.filter((function(t){return t.buildingInfo.buildingId===e.choose})):this.choose&&this.search?this.tableData.filter((function(t){return t.buildingInfo.buildingId===e.choose&&-1!==t.houseInfo.houseNumber.indexOf(e.search)})):!this.choose&&this.search?this.tableData.filter((function(t){return-1!==t.houseInfo.houseNumber.indexOf(e.search)})):this.tableData},searchBuilding:function(){var e=[];return this.tableData.forEach((function(t){var a=t.buildingInfo.buildingId,r=!0;if(e.forEach((function(e){a===e.buildingId&&(r=!1)})),r){var n={buildingId:a,name:t.buildingInfo.name};e.push(n)}})),e}},methods:{handleReset:function(){this.searchForm={buildingName:"",houseNumber:"",rentState:""}},queryRoom:function(){var e=this;this.showLoading=!0,Object(Se["d"])(this.page,this.pageSize,this.searchForm.buildingName,this.searchForm.houseNumber,this.searchForm.rentState).then((function(t){e.handleRoomInfo(t.data)})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showLoading=!1}),600*Math.random())},handleRoomInfo:function(e){var t=this;this.tableData=[],this.pageTotalSize=e.count,e.list.forEach((function(e){var a={renterInfo:"",houseInfo:"",houseState:""};a.houseInfo={buildingId:e.buildingId,buildingName:e.buildingName,address:e.address,roomId:e.roomId,houseNumber:e.houseNumber},e.rentState&&(a.houseState={rentingId:e.rentingId,rentState:e.rentState,createdTime:e.createdTime.slice(0,19).replace("T"," "),stopTime:null==e.stopTime?null:e.stopTime.slice(0,19).replace("T"," ")},a.renterInfo={userId:e.userId,name:e.name,username:e.username,phoneNumber:e.phoneNumber}),t.tableData.push(a)}))},deleteHouse:function(e){var t,a=this;for(t=0;t<this.tableData.length;t++)if(this.tableData[t].houseInfo.roomId===e)break;this.$confirm("此操作将删除【".concat(this.tableData[t].houseInfo.buildingName,"】门牌号为【").concat(this.tableData[t].houseInfo.houseNumber,"】的房屋信息，包含租用信息, 且无法撤销！"),"危险操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){Object(Se["b"])(e).then((function(){a.$message({type:"success",message:"删除成功!"}),a.tableData.splice(t,1)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},toUpdate:function(e){this.$router.push({path:"/manage/updateHouseInfo",query:{tableData:JSON.stringify(e)}})},goInsert:function(){this.$router.push({path:"/manage/insertHouse"})},handleSizeChange:function(e){this.pageSize=e,this.queryRoom()},handleCurrentChange:function(e){this.page=e,this.queryRoom()},querySearchAsync:function(e,t){var a=this.buildingTipList,r=e?a.filter((function(t){return-1!=t.value.indexOf(e.toLowerCase())})):a;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t(r)}),500*Math.random())},getBuildingTip:function(){var e=this;Object($e["c"])().then((function(t){t.data.forEach((function(t){var a={buildingId:t.buildingId,value:t.name};e.buildingTipList.push(a)}))}))},loadData:function(){this.queryRoom(),this.getBuildingTip()}},beforeRouteEnter:function(e,t,a){"/manage/updateHouseInfo"==t.path&&a((function(e){e.queryRoom()})),a()},mounted:function(){this.loadData()}},Fe=De,Ne=(a("d24c"),Object(l["a"])(Fe,Ie,Ce,!1,null,"40246c3e",null)),Re=Ne.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),e.fall?a("div",[a("el-form",{ref:"form",attrs:{model:e.tableData,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"附属楼房名"}},[a("span",{staticStyle:{"font-size":"16px","margin-left":"35px"}},[e._v(e._s(e.tableData.houseInfo.buildingName))])]),a("el-form-item",{attrs:{label:"门牌号",disabled:""}},[a("span",{staticStyle:{"font-size":"16px","margin-left":"35px"}},[e._v(e._s(e.tableData.houseInfo.houseNumber))])]),a("el-form-item",{attrs:{label:"租用状态"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"通过修改租用或停租时间，从而改变租用状态",placement:"right"}},[a("el-switch",{attrs:{disabled:"","active-text":"已租","inactive-text":"空置"},model:{value:e.tableData.houseState.rentState,callback:function(t){e.$set(e.tableData.houseState,"rentState",t)},expression:"tableData.houseState.rentState"}})],1)],1),a("el-form-item",{attrs:{label:"租用人"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"用户名（姓名）",clearable:""},on:{select:e.handleSelect},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),a("el-form-item",{attrs:{label:"租用时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"若不选，则默认当前时间"},model:{value:e.tableData.houseState.createdTime,callback:function(t){e.$set(e.tableData.houseState,"createdTime",t)},expression:"tableData.houseState.createdTime"}})],1),a("el-form-item",{attrs:{label:"长期租用"}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.longRengting,callback:function(t){e.longRengting=t},expression:"longRengting"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!e.longRengting,expression:"!longRengting"}],attrs:{label:"停租时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择停租时间"},on:{change:e.setStopTimeTip},model:{value:e.tableData.houseState.stopTime,callback:function(t){e.$set(e.tableData.houseState,"stopTime",t)},expression:"tableData.houseState.stopTime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit(!0)}}},[e._v("确认修改")]),a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1):a("div",{staticStyle:{"text-align":"center",color:"red","font-size":"30px",padding:"50px 0"}},[a("h1",[e._v("错误！！请先在左边查询房屋信息！")])])])},Ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("h3",[e._v("修改房屋信息")])])}],Be=a("f71c"),Te={name:"UpdateHouseInfo",data:function(){return{state:"",fall:!1,tableData:{renterInfo:{userId:"",name:"",username:"",phoneNumber:""},houseInfo:{buildingId:"",buildingName:"",address:"",roomId:"",houseNumber:""},houseState:{rentingId:"",rentState:"",createdTime:"",stopTime:""}},currentUserId:null,options:[],renter:[],longRengting:!1}},methods:{querySearchAsync:function(e,t){var a=this.renter,r=e?a.filter(this.createStateFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t(r)}),500*Math.random())},createStateFilter:function(e){return function(t){return-1!=t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.currentUserId=e.userId},onSubmit:function(){var e=this,t=this.tableData;Object(Be["b"])(t.houseState.rentingId,this.currentUserId,t.houseInfo.roomId,t.houseState.createdTime,this.longRengting?null:t.houseState.stopTime).then((function(){e.$message.success("修改成功"),e.$router.go(-1)}))},setStopTimeTip:function(){this.$notify({title:"警告",message:"若设定的停租时间到期了，那么该房屋与该租客的租用关系将结束，房屋立刻转为未租用状态，原租用记录将无法显示，但完全不影响订单缴费",type:"warning"})},initData:function(){if(void 0!==this.$route.query.tableData){var e=JSON.parse(this.$route.query.tableData);e.houseState.rentState?this.tableData=JSON.parse(this.$route.query.tableData):this.tableData.houseInfo=e.houseInfo,null!=e.renterInfo.username&&null!=e.renterInfo.name&&(this.state="".concat(e.renterInfo.username,"（").concat(e.renterInfo.name,"）"),this.currentUserId=e.renterInfo.userId),null==this.tableData.houseState.stopTime&&(this.longRengting=!0),this.fall=!0}},queryRenter:function(){var e=this;this.$axios.get(this.$store.state.publicLocation+"/manage/listRenter").then((function(t){var a=t.data;a.forEach((function(t){var a={value:t.username+"（"+t.name+"）",userId:t.userId};e.renter.push(a)}))}))}},created:function(){this.initData(),this.queryRenter()}},Oe=Te,je=(a("9a27"),Object(l["a"])(Oe,Me,Ee,!1,null,"a3573266",null)),qe=je.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._m(0),a("el-form",{ref:"form",attrs:{model:e.tableData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"附属楼盘名"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择楼房"},model:{value:e.tableData.buildingId,callback:function(t){e.$set(e.tableData,"buildingId",t)},expression:"tableData.buildingId"}},e._l(e.tableData.options,(function(e){return a("el-option",{key:e.buildingId,attrs:{label:e.name,value:e.buildingId}})})),1)],1),a("el-form-item",{attrs:{label:"门牌号"}},[a("el-input",{staticStyle:{width:"21%"},model:{value:e.tableData.houseNumber,callback:function(t){e.$set(e.tableData,"houseNumber",t)},expression:"tableData.houseNumber"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addRoom}},[e._v("提交")]),a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)])},Le=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center"}},[a("h3",[e._v("录入房屋")])])}],Ae={name:"InsertHouse",data:function(){return{tableData:{buildingId:"",houseNumber:"",options:[]},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:20,message:"用户名长度不少于4",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少为6位",trigger:"blur"}]}}},methods:{validateRoomInfo:function(){return!(this.tableData.buildingId<=0||""===this.tableData.houseNumber||!/^[0-9]+$/.test(this.tableData.houseNumber)||!/^[0-9]+$/.test(this.tableData.buildingId))||(this.$message.error("数据格式不正确"),!1)},addRoom:function(){var e=this;this.validateRoomInfo()&&Object(Se["a"])(this.tableData.buildingId,this.tableData.houseNumber).then((function(){e.$message.success("添加成功！"),e.tableData.houseNumber=""}))},getBuildingTip:function(){var e=this;Object($e["c"])().then((function(t){t.data.forEach((function(t){var a={buildingId:t.buildingId,name:t.name};e.tableData.options.push(a)}))}))}},created:function(){this.getBuildingTip()}},He=Ae,Ue=Object(l["a"])(He,ze,Le,!1,null,"335f9571",null),Ve=Ue.exports,Pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("main",[a("el-form",{attrs:{model:e.searchForm,inline:!0,"label-position":"left"}},[a("el-form-item",{attrs:{label:"楼盘名",prop:"name"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入楼盘名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入地址"},model:{value:e.searchForm.address,callback:function(t){e.$set(e.searchForm,"address",t)},expression:"searchForm.address"}})],1),a("div",{staticClass:"search-button"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryBuilding}},[e._v("搜索")])],1),a("el-form-item",[a("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),a("div",{staticStyle:{height:"15px"}}),a("div",[a("el-button",{staticClass:"addButton",attrs:{type:"success",icon:"el-icon-plus",size:"medium"},on:{click:e.goInsert}},[e._v("新增")]),a("el-pagination",{staticClass:"renterPagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticStyle:{width:"100%","font-size":"16px"},attrs:{data:e.tableData,stripe:"",border:"","header-cell-style":{background:"#f0f0f0",color:"#333"}}},[a("el-table-column",{attrs:{prop:"name",label:"楼房名",width:"180",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.tableData[t.$index].editing?a("span",[a("el-input",{attrs:{placeholder:"楼房名字"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})],1):a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.tableData[t.$index].editing?a("span",[a("el-input",{attrs:{placeholder:"楼房地址"},model:{value:t.row.address,callback:function(a){e.$set(t.row,"address",a)},expression:"scope.row.address"}})],1):a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.address))])]}}])}),a("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.createdTime))])])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.tableData[t.$index].editing,expression:"!tableData[scope.$index].editing"}],staticStyle:{width:"45%"},attrs:{type:"primary",round:""},on:{click:function(a){e.tableData[t.$index].editing=!0}}},[e._v("修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.tableData[t.$index].editing,expression:"!tableData[scope.$index].editing"}],staticStyle:{width:"45%"},attrs:{type:"danger",round:""},on:{click:function(a){return e.deleteInfo(t,t.$index)}}},[e._v("删除")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.tableData[t.$index].editing,expression:"tableData[scope.$index].editing"}],staticStyle:{width:"100%",margin:"0"},attrs:{type:"success",round:""},on:{click:function(a){return e.updateBuilding(t.$index)}}},[e._v("确认变更")])],1)]}}])})],1)],1)])},Ze=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("h3",[e._v("楼盘管理")])])}],Je={name:"BuildingManage",components:{},data:function(){return{searchForm:{name:"",address:""},tableData:[],page:1,pageSize:10,pageTotalSize:10,showLoading:!0}},methods:{queryRenter:function(){},handleReset:function(){this.searchForm={name:"",address:""}},handleSizeChange:function(e){this.pageSize=e,this.queryBuilding()},handleCurrentChange:function(e){this.page=e,this.queryBuilding()},goInsert:function(){this.$router.push({path:"/manage/insertBuilding"})},queryBuilding:function(){var e=this;this.showLoading=!0,this.tableData=[],Object($e["d"])(this.page,this.pageSize,this.searchForm.name,this.searchForm.address).then((function(t){t.data.list.forEach((function(t){var a={buildingId:"",name:"",address:"",createdTime:"",editing:!1};a.buildingId=t.buildingId,a.name=t.name,a.address=t.address,a.createdTime=t.createdTime.slice(0,19).replace("T"," "),e.tableData.unshift(a)})),e.pageTotalSize=t.data.count,clearTimeout(e.timeout),e.timeout=setTimeout((function(){e.showLoading=!1}),600*Math.random())}))},handleDelete:function(e){var t=this.page===Math.ceil(this.pageTotalSize/this.pageSize)&&0===e&&0===this.tableData.length;t&&(this.page>1&&this.page--,this.queryBuilding())},deleteInfo:function(e,t){var a=this;this.$confirm("此操作将删除楼房【".concat(this.tableData[t].name,"】所有信息，包括其下的所有房屋信息,水电信息，租用信息, 是否继续?"),"危险操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){Object($e["b"])(a.tableData[t].buildingId).then((function(){a.$message({type:"success",message:"删除成功!"}),a.tableData.splice(t,1),a.handleDelete(e.$index)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},updateBuilding:function(e){var t=this;Object($e["e"])(this.tableData[e].buildingId,this.tableData[e].name,this.tableData[e].address).then((function(){t.$message.success("修改成功！"),t.tableData[e].editing=!1}))},addBuilding:function(e){var t=this,a=this.tableData[e];this.$axios.get(this.$store.state.publicLocation+"/manage/addBuilding",{params:{name:a.name,address:a.address}}).then((function(e){e.data&&(a.editing=!1,t.$message.success("添加楼房成功"))}))}},created:function(){this.queryBuilding()},mounted:function(){}},We=Je,Qe=(a("1326"),Object(l["a"])(We,Pe,Ze,!1,null,"f68d844c",null)),Ke=Qe.exports,Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("div",[a("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,inline:!0,"label-position":"left"}},[a("el-form-item",{attrs:{label:"附属楼盘名",prop:"buildingName"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入附属楼房名",clearable:""},model:{value:e.searchForm.buildingName,callback:function(t){e.$set(e.searchForm,"buildingName",t)},expression:"searchForm.buildingName"}})],1),a("el-form-item",{attrs:{label:"门牌号",prop:"houseNumber"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入门牌号"},model:{value:e.searchForm.houseNumber,callback:function(t){e.$set(e.searchForm,"houseNumber",t)},expression:"searchForm.houseNumber"}})],1),a("el-form-item",{attrs:{label:"读数年月"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"month",placeholder:"选择年月"},model:{value:e.searchForm.readingDate,callback:function(t){e.$set(e.searchForm,"readingDate",t)},expression:"searchForm.readingDate"}})],1),a("span",{staticClass:"search-button1"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryMeterReading}},[e._v("搜索")])],1),a("el-form-item",[a("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),a("div",{staticStyle:{height:"15px"}}),a("div",{staticClass:"add-pagination clearfix"},[a("div",[a("el-button",{staticClass:"add",attrs:{type:"success"},on:{click:e.toAddMeterReading}},[e._v("添加水电读数")]),a("el-button",{staticClass:"add",attrs:{slot:"trigger",type:"primary"},on:{click:function(t){e.batchAddDialogVisible=!0}},slot:"trigger"},[e._v("批量新增操作")])],1),a("el-pagination",{staticClass:"renterPagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-table",{staticStyle:{width:"100%","font-size":"16px"},attrs:{data:e.tableData,"header-cell-style":{background:"#f0f0f0",color:"#333"}}},[a("el-table-column",{attrs:{prop:"buildingName",label:"楼盘名",align:"center"}}),a("el-table-column",{attrs:{prop:"houseNumber",label:"房间号",align:"center"}}),a("el-table-column",{attrs:{prop:"waterReading",label:"水表读数/ 吨",align:"center"}}),a("el-table-column",{attrs:{prop:"electricityReading",label:"电表读数/ 度",align:"center"}}),a("el-table-column",{attrs:{prop:"readingDateVo",label:"读数日期",align:"center"}}),a("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{staticStyle:{width:"38%","margin-right":"5px"},attrs:{type:"primary",round:""},on:{click:function(a){return e.editMeterReading(t.row)}}},[e._v("修改 ")]),a("el-popconfirm",{attrs:{title:"确认删除？"},on:{confirm:function(a){return e.deleteMeterReading(t.row)}}},[a("el-button",{staticStyle:{width:"38%"},attrs:{slot:"reference",type:"danger",round:""},slot:"reference"},[e._v("删除 ")])],1)],1)]}}])})],1),a("div",[a("el-dialog",{attrs:{visible:e.dialogVisible,title:"添加水电读数"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"楼房号"}},[a("el-select",{attrs:{placeholder:"请选择楼房号"},on:{change:e.listRoomWhenChooseBuilding},model:{value:e.form.buildingId,callback:function(t){e.$set(e.form,"buildingId",t)},expression:"form.buildingId"}},e._l(e.buildings,(function(e){return a("el-option",{key:e.buildingId,attrs:{label:e.buildingName,value:e.buildingId}})})),1)],1),a("el-form-item",{attrs:{label:"房间号"}},[a("el-select",{attrs:{disabled:e.roomSelectAble,placeholder:"请选择房间号",clearable:""},model:{value:e.form.roomId,callback:function(t){e.$set(e.form,"roomId",t)},expression:"form.roomId"}},e._l(e.rooms,(function(e){return a("el-option",{key:e.roomId,attrs:{label:e.houseNumber,value:e.roomId}})})),1)],1),a("el-form-item",{attrs:{label:"读数日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"不选默认今天"},model:{value:e.form.readingDate,callback:function(t){e.$set(e.form,"readingDate",t)},expression:"form.readingDate"}})],1),a("el-form-item",{attrs:{label:"水表读数"}},[a("el-input",{model:{value:e.form.waterReading,callback:function(t){e.$set(e.form,"waterReading",t)},expression:"form.waterReading"}})],1),a("el-form-item",{attrs:{label:"电表读数"}},[a("el-input",{model:{value:e.form.electricityReading,callback:function(t){e.$set(e.form,"electricityReading",t)},expression:"form.electricityReading"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addMeterReading}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogVisibleUpdate,title:"修改水电读数记录"},on:{"update:visible":function(t){e.dialogVisibleUpdate=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"楼房号"}},[a("span",[e._v(" "+e._s(e.form.buildingName)+" ")])]),a("el-form-item",{attrs:{label:"房间号"}},[a("span",[e._v(e._s(e.form.houseNumber))])]),a("el-form-item",{attrs:{label:"读数日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"不选默认今天"},model:{value:e.form.readingDate,callback:function(t){e.$set(e.form,"readingDate",t)},expression:"form.readingDate"}})],1),a("el-form-item",{attrs:{label:"水表读数"}},[a("el-input",{model:{value:e.form.waterReading,callback:function(t){e.$set(e.form,"waterReading",t)},expression:"form.waterReading"}})],1),a("el-form-item",{attrs:{label:"电表读数"}},[a("el-input",{model:{value:e.form.electricityReading,callback:function(t){e.$set(e.form,"electricityReading",t)},expression:"form.electricityReading"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleUpdate=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateMeterReading}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.batchAddDialogVisible,title:"批量新增操作"},on:{"update:visible":function(t){e.batchAddDialogVisible=t}}},[a("h4",{staticClass:"batchTitle"},[e._v("选择需要处理的楼盘以及时间")]),a("el-form",{ref:"batchForm",staticStyle:{"margin-bottom":"20px"},attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"附属楼盘名",prop:"buildingName"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入附属楼房名",clearable:""},on:{select:e.handleBatchSelect},model:{value:e.batchForm.buildingName,callback:function(t){e.$set(e.batchForm,"buildingName",t)},expression:"batchForm.buildingName"}})],1),a("el-form-item",{attrs:{label:"录入日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期"},model:{value:e.batchForm.readingDate,callback:function(t){e.$set(e.batchForm,"readingDate",t)},expression:"batchForm.readingDate"}})],1)],1),a("div",{staticClass:"clearfix",staticStyle:{"margin-top":"30px","margin-left":"25px"}},[a("a",{attrs:{href:e.fileUrl,download:""}}),a("el-button",{staticClass:"add",attrs:{type:"success"},on:{click:e.getExcelTemplate}},[e._v("获取 Excel 模板")]),a("el-upload",{staticClass:"add upload-demo",staticStyle:{"margin-left":"30px"},attrs:{action:"","on-change":e.handleUpload,"before-upload":e.beforeUpload,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}},[a("el-tooltip",{staticClass:"item",attrs:{slot:"trigger",effect:"dark",content:"自动解析楼房名与时间",placement:"top"},slot:"trigger"},[a("el-button",{attrs:{type:"primary"}},[e._v("选取Excel文件")])],1),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("仅支持 .xlsx 格式的Excel文件")])],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showHandleExcel,expression:"showHandleExcel"}],attrs:{type:"warning"},on:{click:e.handleList}},[e._v("解析并导入")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.batchAddDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)},Xe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"center","margin-bottom":"10px"}},[a("h3",[e._v("水电管理")])])}],Ye=(a("5cc6"),a("907a"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("1276"),a("25ca")),et=a("866f"),tt={data:function(){return{searchForm:{readingDate:"",buildingName:"",houseNumber:"",rentState:""},page:1,pageSize:10,pageTotalSize:20,buildingTipList:[],tableData:{Id:"",buildingId:"",buildingName:"",roomId:"",houseNumber:"",waterReading:"",electricityReading:""},dialogVisible:!1,form:{buildingId:"",roomId:"",houseNumber:"",readingDate:"",waterReading:null,electricityReading:null},buildings:[],roomSelectAble:!0,rooms:[],importDialogVisible:!1,file:null,batchForm:{buildingId:"",buildingName:"",readingDate:""},showHandleExcel:!1,readingDate:"",batchAddDialogVisible:!1,dialogVisibleUpdate:!1,waterElectricityList:[],excelHeader:[],updateMeterReadingId:"",fileUrl:""}},created:function(){this.queryMeterReading(),this.getBuildingTip()},methods:{handleUpload:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=new Uint8Array(e.target.result),r=Ye["a"](a,{type:"array"}),n=r.Sheets[r.SheetNames[0]],i=Ye["b"].sheet_to_json(n),o=Ye["b"].sheet_to_json(n,{header:1}),s=o[0];t.excelHeader=s,t.waterElectricityList=i;var l=[];i.forEach((function(e){var t={buildingId:e["楼盘编号"],buildingName:e["楼盘名"],roomId:e["房屋编号"],houseNumber:e["门牌号"],waterReading:e["水记录值"],electricityReading:e["电记录值"]};""==t.waterReading&&""==t.electricityReading||l.push(t)})),t.waterElectricityList=l},a.readAsArrayBuffer(e.raw)},beforeUpload:function(e){var t=this,a=e.name.split(".").pop();if("xlsx"!==a)return this.$message.error("上传文件格式错误，请上传 .xlsx 格式的Excel文件"),!1;var r=e.name,n=/^([^(]+)[（(](\d{4}-\d{1,2}-\d{1,2})[)）]/,i=r.match(n);if(!i)return this.$message.error("文件名格式须为：楼房名(年-月-日)"),this.showHandleExcel=!1,!1;var o=i[1],s=i[2];this.batchForm.readingDate=s+" 00:00:00",this.batchForm.buildingName=o,this.buildings.forEach((function(e){e.buildingName==o&&(t.batchForm.buildingId=e.buildingId)})),this.showHandleExcel=!0},handleList:function(){var e=this;null!=this.waterElectricityList&&0!=this.waterElectricityList.length&&Object(et["c"])(this.waterElectricityList,this.batchForm.readingDate).then((function(){e.$message.success("数据批量导入成功！"),e.showHandleExcel=!1,e.batchForm.readingDate="",e.batchForm.buildingName="",e.batchForm.buildingId=""}))},handleBatchSelect:function(e){this.batchForm.buildingId=e.buildingId},queryMeterReading:function(){var e=this;this.tableData=[];var t=this.searchForm;Object(et["d"])(this.page,this.pageSize,t.buildingName,t.houseNumber,t.readingDate).then((function(t){var a=t.data;e.pageTotalSize=a.count,a.list.forEach((function(t){var a={id:t.id,buildingName:t.buildingName,roomId:t.roomId,houseNumber:t.houseNumber,readingDate:t.readingDate,readingDateVo:t.readingDate.substr(0,10),waterReading:t.waterReading,electricityReading:t.electricityReading};e.tableData.push(a)}))}))},handleReset:function(){this.searchForm={buildingName:"",houseNumber:"",readingDate:""}},handleSizeChange:function(e){this.pageSize=e,this.queryMeterReading()},handleCurrentChange:function(e){this.page=e,this.queryMeterReading()},addMeterReading:function(){var e=this;Object(et["a"])(this.form.buildingId,this.form.roomId,this.form.readingDate,this.form.waterReading,this.form.electricityReading).then((function(){e.$message.success("添加成功"),e.dialogVisible=!1,e.queryMeterReading()}))},fetchRooms:function(){this.rooms=[{id:1,roomId:"A101"},{id:2,roomId:"A102"},{id:3,roomId:"A103"}]},toAddMeterReading:function(){this.form={buildingId:"",roomId:"",houseNumber:"",readingDate:"",waterReading:null,electricityReading:null},this.roomSelectAble=!0,this.dialogVisible=!0},listRoomWhenChooseBuilding:function(){var e=this;this.form.houseNumber="",this.roomSelectAble=!1,Object(Se["c"])(this.form.buildingId).then((function(t){e.rooms=[],t.data.forEach((function(t){var a={roomId:t.roomId,houseNumber:t.houseNumber};e.rooms.push(a)}))}))},editMeterReading:function(e){this.updateMeterReadingId=e.id,this.form={buildingId:"",buildingName:e.buildingName,roomId:e.roomId,houseNumber:e.houseNumber,readingDate:e.readingDate,waterReading:e.waterReading,electricityReading:e.electricityReading},this.dialogVisibleUpdate=!0},updateMeterReading:function(){var e=this;Object(et["e"])(this.updateMeterReadingId,this.form.readingDate,this.form.waterReading,this.form.electricityReading).then((function(){e.$message.success("修改成功"),e.dialogVisibleUpdate=!1,e.queryMeterReading()}))},deleteMeterReading:function(e){var t=this;Object(et["b"])(e.id).then((function(){t.$message.success("删除成功"),t.queryMeterReading()}))},getExcelTemplate:function(){var e=this;if(""==this.batchForm.buildingId||""==this.batchForm.readingDate)return this.$message.error("楼房名与时间不能为空"),!1;Object(Se["c"])(this.batchForm.buildingId).then((function(t){if(null==t.data||0==t.data.length)return e.$message.error("该楼房不存在任何房屋"),!1;e.$message.info("服务器处理中,请稍后~");var a=document.createElement("a");a.href="http://localhost:81/manage/meterReading/downloadExcel?buildingId=".concat(e.batchForm.buildingId,"&readingDate=").concat(e.batchForm.readingDate),a.click(),e.$notify({title:"警告",message:"模板不能新加行，也不能修改前4列数据，只能新增与修改水电！",type:"warning",position:"top-left"})}))},querySearchAsync:function(e,t){var a=this.buildingTipList,r=e?a.filter((function(t){return-1!=t.value.indexOf(e.toLowerCase())})):a;clearTimeout(this.timeout),this.timeout=setTimeout((function(){t(r)}),500*Math.random())},getBuildingTip:function(){var e=this;this.buildingTipList=[],this.buildings=[],Object($e["c"])().then((function(t){t.data.forEach((function(t){var a={buildingId:t.buildingId,value:t.name};e.buildingTipList.push(a);var r={buildingId:t.buildingId,buildingName:t.name};e.buildings.push(r)}))}))}}},at=tt,rt=(a("aeae"),Object(l["a"])(at,Ge,Xe,!1,null,"5a923270",null)),nt=rt.exports,it=new p["a"]({routes:[{path:"/",component:E,children:[{path:"login",component:z,props:function(e){var t=e.query;return{username:t.username}}},{path:"register",component:P}]},{path:"/manage",component:ce,children:[{path:"/",component:function(e){return a.e("index").then(function(){return e(a("32be"))}.bind(null,a)).catch(a.oe)}},{path:"renter",component:function(e){return a.e("index").then(function(){return e(a("3840"))}.bind(null,a)).catch(a.oe)},meta:{keepAlive:!0}},{path:"insertRenter",component:be},{path:"queryRenter",component:ge["a"]},{path:"updateRenter",component:ke},{path:"buildingManage",component:Ke,meta:{keepAlive:!0}},{path:"insertBuilding",component:function(e){return a.e("chunk-441f8ca5").then(function(){return e(a("c088"))}.bind(null,a)).catch(a.oe)}},{path:"insertHouse",component:Ve},{path:"updateHouseInfo",component:qe},{path:"queryHouseInfo",component:Re,meta:{keepAlive:!0}},{path:"meterReadingManage",component:nt}]}]}),ot=it,st=a("4360"),lt=a("5c96"),ct=a.n(lt),ut=(a("0fae"),a("313e"));r["default"].prototype.$echarts=ut,r["default"].config.productionTip=!1,r["default"].use(p["a"]),r["default"].use(ct.a),r["default"].use(m.a),r["default"].prototype.$axios=h.a,new r["default"]({render:function(e){return e(u)},router:ot,store:st["a"],created:function(){st["a"].state.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);var e=window.document.location.pathname;st["a"].state.publicLocation=e.substring(0,e.substr(1).indexOf("/")+1)}}).$mount("#app")},"62c6":function(e,t,a){},"671e":function(e,t,a){"use strict";a("5683")},"69a4":function(e,t,a){e.exports=a.p+"img/logo.f2a1c82b.png"},"6bbb":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return u}));var r=a("8daa"),n="/manage/renter";function i(e,t,a,i,o,s,l,c,u){return Object(r["a"])({url:n,method:"post",params:{roleId:e,name:t,sex:a,identity:i,username:o,password:s,phoneNumber:l,locked:c,enable:u}})}function o(e){return Object(r["a"])({url:n,method:"delete",data:{userId:e}})}function s(e){return Object(r["a"])({url:n,method:"put",data:e})}function l(e,t,a,n,i,o){return Object(r["a"])({url:"/manage/renterItemVolList",method:"get",params:{page:e,pageSize:t,username:a,name:n,phoneNumber:i,rentState:o}})}function c(){return Object(r["a"])({url:"/manage/totalRenter",method:"get"})}function u(){return Object(r["a"])({url:"/manage/role",method:"get"})}},"70ad":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c}));var r=a("8daa"),n="/manage/building";function i(e,t){return Object(r["a"])({url:n,method:"post",data:{name:e,address:t}})}function o(e){return Object(r["a"])({url:n,method:"delete",data:{buildingId:e}})}function s(e,t,a){return Object(r["a"])({url:n,method:"put",data:{buildingId:e,name:t,address:a}})}function l(e,t,a,i){return Object(r["a"])({url:n,method:"get",params:{page:e,pageSize:t,name:a,address:i}})}function c(){return Object(r["a"])({url:"/manage/buildingTip",method:"get"})}},7358:function(e,t,a){},"7ee2":function(e,t,a){},"7f11":function(e,t,a){},"82da":function(e,t,a){},"843f":function(e,t,a){"use strict";a("17d8")},"85ec":function(e,t,a){},"866f":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return u}));var r=a("8daa"),n="/manage/meterReading";function i(e,t,a,i,o){return Object(r["a"])({url:n,method:"get",params:{page:e,pageSize:t,buildingName:a,houseNumber:i,readingDate:o}})}function o(e,t,a,i,o){return Object(r["a"])({url:n,method:"post",data:{roomId:t,readingDate:a,waterReading:i,electricityReading:o}})}function s(e,t,a,i){return Object(r["a"])({url:n,method:"put",data:{id:e,readingDate:t,waterReading:a,electricityReading:i}})}function l(e){return Object(r["a"])({url:n,method:"delete",params:{id:e}})}function c(e,t){return Object(r["a"])({url:"/manage/meterReading/handleList",method:"post",data:{meterReadingExcelParam:e,readingDate:t}})}function u(e){return Object(r["a"])({url:"/manage/meterReading/waterAndElectricityRank",method:"get",params:{date:e}})}},"8da9":function(e,t,a){"use strict";a("62c6")},"8daa":function(e,t,a){"use strict";a("d3b7");var r=a("bc3a"),n=a.n(r),i=a("5c96"),o=a("4360"),s=n.a.create({baseURL:"/",timeout:5e3});s.interceptors.response.use((function(e){"timeout"==e.headers["session_time_out"]&&o["a"].dispatch("fedLogOut");var t=e.data;return 200===t.code&&t.success?e.data:90001===t.code?Promise.reject("error"):90002===t.code?(Object(i["Message"])({type:"warning",showClose:!0,message:"未登录或登录超时，请重新登录哦"}),Promise.reject("error")):70001===t.code?(console.info("权限认证错误"),Object(i["Message"])({type:"warning",showClose:!0,message:"你没有权限访问哦"}),Promise.reject("error")):(Object(i["Message"])({type:"error",showClose:!0,message:t.message}),Promise.reject(t.message))})),t["a"]=s},9136:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,inline:!0,"label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入用户名"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),a("el-form-item",{attrs:{label:" 姓名",prop:"name"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入姓名"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),a("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入电话号码"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),a("el-form-item",{attrs:{label:"是否租房",prop:"rentState"}},[a("el-select",{staticClass:"rentStatueSelect",attrs:{placeholder:"请选择"},model:{value:e.searchForm.rentState,callback:function(t){e.$set(e.searchForm,"rentState",t)},expression:"searchForm.rentState"}},[a("el-option",{attrs:{label:"是",value:!0}}),a("el-option",{attrs:{label:"否",value:!1}})],1)],1),a("span",{staticClass:"search-button"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryRenter}},[e._v("搜索")])],1),a("el-form-item",[a("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1),a("div",{staticStyle:{height:"15px"}}),a("div",[a("el-button",{staticClass:"addButton",attrs:{type:"success",icon:"el-icon-plus",size:"medium"},on:{click:e.goInsert}},[e._v("新增")]),a("el-pagination",{staticClass:"renterPagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],attrs:{data:e.filterData,"element-loading-text":"数据正在加载中...","header-cell-style":{background:"#f0f0f0",color:"#333"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{staticStyle:{color:"black","margin-left":"10%"}},[a("h3",[e._v("详细个人信息")])]),a("el-form-item",{attrs:{label:"用户 ID"}},[a("span",[e._v(e._s(t.row.userId))])]),a("el-form-item",{attrs:{label:"角色 ID"}},[a("span",[e._v(e._s(t.row.roleId))])]),a("el-form-item",{attrs:{label:"角色描述"}},[a("span",[e._v(e._s(t.row.roleDescription))])]),a("el-form-item",{attrs:{label:"用户名"}},[a("span",[e._v(e._s(t.row.username))])]),a("el-form-item",{attrs:{label:"性别"}},[a("span",[e._v(e._s("2"===t.row.sex?"未知":"1"===t.row.sex?"男":"女"))])]),a("el-form-item",{attrs:{label:"姓名"}},[a("span",[e._v(e._s(t.row.name))])]),a("el-form-item",{attrs:{label:"电话号码"}},[a("span",[e._v(e._s(t.row.phoneNumber))])]),a("el-form-item",{attrs:{label:"身份证号码"}},[a("span",[e._v(e._s(t.row.identity))])]),a("el-form-item",{attrs:{label:"锁定状态"}},[a("span",[e._v(e._s(t.row.locked?"已锁定":"未锁定"))])]),a("el-form-item",{attrs:{label:"可用状态"}},[a("span",[e._v(e._s(t.row.enable?"账户可用":"账户不可用"))])]),a("el-form-item",{attrs:{label:"是否租房"}},[a("span",[e._v(e._s(t.row.rentState?"是":"否"))])])],1)]}}])}),a("el-table-column",{attrs:{label:"用户名",prop:"username",align:"center"}}),a("el-table-column",{attrs:{label:"姓名",prop:"name",align:"center"}}),a("el-table-column",{attrs:{label:"电话号码",prop:"phoneNumber",align:"center"}}),a("el-table-column",{attrs:{label:"是否租房",prop:"houseState.rentState",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s(t.row.rentState?"是":"否")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-button",{staticStyle:{width:"45%"},attrs:{type:"primary",round:""},on:{click:function(a){e.$router.push({path:"/manage/updateRenter",query:{isHasData:!0,tableData:JSON.stringify(e.filterData[t.$index])}})}}},[e._v("修改 ")]),a("el-button",{staticStyle:{width:"45%"},attrs:{type:"danger",round:""},on:{click:function(a){return e.triggerDeleteRenter(t,t.row.userId)}}},[e._v("删除 ")])],1)]}}])})],1),a("div",[a("el-dialog",{staticClass:"deletef",attrs:{title:"确认删除",visible:e.confirmDialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"30%"},on:{"update:visible":function(t){e.confirmDialogVisible=t}}},[a("p",{staticClass:"contentp"},[e._v(e._s(e.message))]),a("div",{staticClass:"buttonf"},[e.countdown>0?a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"danger",disabled:!0}},[e._v("删除（"+e._s(e.countdown)+"S）")]),a("el-button",{on:{click:function(t){e.confirmDialogVisible=!1}}},[e._v("取消")])],1):a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"danger",loading:e.deleting},on:{click:e.deleteRenter}},[e._v("删除")]),a("el-button",{on:{click:function(t){e.confirmDialogVisible=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"empty"})])],1)],1)},n=[],i=(a("4de4"),a("d3b7"),a("ac1f"),a("841c"),a("b0c0"),a("159b"),a("a4d3"),a("e01a"),a("99af"),a("a434"),a("6bbb")),o={name:"QueryRenter",data:function(){return{search:"",tableData:[],showLoading:!0,page:1,pageSize:10,pageTotalSize:20,searchForm:{username:"",name:"",phoneNumber:"",rentState:""},confirmDialogVisible:!1,countdown:0,deleting:!1,countdownIntervalId:null,message:"",readyDeleteProps:"",readyDeleteUserId:""}},computed:{filterData:function(){var e=this;return this.tableData.filter((function(t){return-1!==t.username.indexOf(e.search)}))}},methods:{handleReset:function(){this.searchForm={username:"",name:"",phoneNumber:"",rentState:""}},queryRenter:function(){var e=this;this.tableData=[],this.showLoading=!0;var t="";switch(this.searchForm.rentState){case"1":t=!0;break;case"0":t=!1;break;default:t=""}Object(i["d"])(this.page,this.pageSize,this.searchForm.username,this.searchForm.name,this.searchForm.phoneNumber,t).then((function(t){t.data.forEach((function(t){var a={userId:t.uUserVol.userId,roleId:t.uUserVol.roleId,roleDescription:t.uRole.description,username:t.uUserVol.username,password:"",sex:t.uUserVol.sex,name:t.uUserVol.name,phoneNumber:t.uUserVol.phoneNumber,identity:t.uUserVol.identity,locked:"1"===t.uUserVol.locked,enable:"1"===t.uUserVol.enable,createdTime:"2021-11-20 13:19:00",updateTime:t.uUserVol.updateTime,rentState:t.rentState};e.tableData.push(a)}))})),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showLoading=!1}),600*Math.random())},getTotalRenter:function(){var e=this;Object(i["c"])().then((function(t){e.pageTotalSize=t.data}))},handleDelete:function(e){var t=this.page===Math.ceil(this.pageTotalSize/this.pageSize)&&0===e&&0===this.tableData.length;t&&(this.page>1&&this.page--,this.loadData())},triggerDeleteRenter:function(e,t){var a;for(this.showConfirmDialog(),this.readyDeleteProps=e,this.readyDeleteUserId=t,a=0;a<this.tableData.length;a++)if(this.tableData[a].userId===t)break;this.message="此操作将删除用户名为【".concat(this.tableData[a].username,"】，姓名为【").concat(this.tableData[a].name,"】信息，包含租用信息, 且无法撤销！")},deleteRenter:function(){var e=this;Object(i["b"])(this.readyDeleteUserId).then((function(t){if(t.data){var a;for(e.$message({type:"success",message:"删除成功!"}),a=0;a<e.tableData.length;a++)if(e.tableData[a].userId===e.readyDeleteUserId)break;e.tableData.splice(a,1),e.handleDelete(e.readyDeleteProps.$index),e.getTotalRenter(),e.confirmDialogVisible=!1,clearInterval(e.countdownIntervalId)}else e.$message({type:"error",message:"删除失败！"})}))},goInsert:function(){this.$router.push({path:"/manage/insertRenter"})},handleSizeChange:function(e){this.pageSize=e,this.queryRenter()},handleCurrentChange:function(e){this.page=e,this.queryRenter()},loadData:function(){this.queryRenter(),this.getTotalRenter()},showConfirmDialog:function(){var e=this;this.confirmDialogVisible=!0,this.countdown=2,this.countdownIntervalId=setInterval((function(){e.countdown--,0===e.countdown&&clearInterval(e.countdownIntervalId)}),1e3)},deleteItem:function(){var e=this;this.deleting=!0,setTimeout((function(){e.deleting=!1,e.confirmDialogVisible=!1}),1e3)}},mounted:function(){this.loadData()},components:{}},s=o,l=(a("adb6"),a("2877")),c=Object(l["a"])(s,r,n,!1,null,"4b21a94f",null);t["a"]=c.exports},"9a27":function(e,t,a){"use strict";a("3435")},adb6:function(e,t,a){"use strict";a("7358")},aeae:function(e,t,a){"use strict";a("548f")},c63a:function(e,t,a){"use strict";a("3aa4")},d24c:function(e,t,a){"use strict";a("3bec")},db28:function(e,t,a){"use strict";a("7ee2")},ed89:function(e,t,a){"use strict";a("7f11")},f4db:function(e,t,a){},f71c:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var r=a("8daa"),n="/manage/renting";function i(e,t,a,i,o){return Object(r["a"])({url:n,method:"put",data:{rentingId:e,userId:t,roomId:a,createdTime:i,stopTime:o}})}function o(){return Object(r["a"])({url:"/manage/rentingWeek",method:"get"})}},fd4d:function(e,t,a){}});
//# sourceMappingURL=app.7316ee81.js.map